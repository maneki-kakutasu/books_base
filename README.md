# Разработка интеграционной базы данных на основе парсинга веб-ресурсов

## Предметная область: Книги и литература

### Описание проекта
Курсовой проект представляет собой агрегатор книжных предложений из нескольких онлайн-магазинов. Система собирает данные, объединяет их по уникальному идентификатору (ISBN) и предоставляет веб-интерфейс для сравнения цен.

### Технологический стек
- **Scraping:** Python, Scrapy (асинхронный сбор данных).
- **Backend:** FastAPI (современный и быстрый API).
- **Database:** PostgreSQL (реляционная база данных).
- **ORM:** SQLAlchemy (работа с БД через Python-объекты).
- **Frontend:** Jinja2, Bootstrap 5 (адаптивный интерфейс).
- **Infrastructure:** Docker, Docker Compose.

### Структура проекта
- `app/` — Веб-приложение (модели БД, API-маршруты, HTML-шаблоны).
- `scrapers/` — Парсеры для сайтов Book24 и Читай-Город.
- `core/` — Скрипты импорта и дедупликации данных.
- `data/` — Локальное хранилище собранных JSON-файлов.

### Инструкция по запуску (Docker)

1. Клонируйте репозиторий.
2. Создайте файл `.env` на основе примера (укажите свои доступы к БД).
3. Запустите проект:
   ```bash
   docker-compose up --build
   ```

Приложение будет доступно по адресу: http://localhost:8000

## Инструкция по работе с данными (Manual)

Если вы запускаете проект локально через venv:

### 1. Сбор данных:

```bash
# Сбор с Book24
scrapy crawl book24
# Сбор с Читай-Города
scrapy crawl chitai_gorod
```

### 2. Инициализация таблиц БД:

```bash
python create_tables.py
```

### 3. Импорт и дедупликация:

```bash
python -m core.import_data
```

### 4. Запуск веб-интерфейса:

```bash
uvicorn app.main:app --reload
```

## Алгоритм дедупликации

В качестве ключевого атрибута для объединения данных выбран ISBN.

- При парсинге данные очищаются от лишних символов (тире, пробелов).
- Скрипт импорта проверяет наличие ISBN в таблице products.
- Если книга уже существует, информация о ней не дублируется, а в таблицу offers добавляется новая запись с актуальной ценой и ссылкой на магазин.
- Если ISBN отсутствует, используются методы нечеткого сравнения по названию и автору.
